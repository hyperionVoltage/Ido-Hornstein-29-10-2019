(this["webpackJsonpweather-app-assignment"]=this["webpackJsonpweather-app-assignment"]||[]).push([[3],{39:function(e,t,a){e.exports={link:"header_link__LSzw3",nav_link:"header_nav_link__3raDr",header:"header_header__3QiQY",nav_links:"header_nav_links__3ygCn",error_starter:"header_error_starter__3odxs",unit_changer:"header_unit_changer__1nwaC",theme_changer:"header_theme_changer__1qvav"}},40:function(e,t,a){},42:function(e,t,a){e.exports={search_box:"searchbar_search_box__26bKA",search_text:"searchbar_search_text__1Osym",search_button:"searchbar_search_button__1r_pY",search_related_locations:"searchbar_search_related_locations__2lp3Q",individual_location:"searchbar_individual_location__b1Ye4",input_seperator:"searchbar_input_seperator__dtkTB",add_to_favorites:"searchbar_add_to_favorites__1Y1bS"}},64:function(e,t,a){e.exports={container:"singularlocationweatherdisplay_container__1PV_v",location_title:"singularlocationweatherdisplay_location_title__1tY3P",location_image:"singularlocationweatherdisplay_location_image__1qbcE",current_weather:"singularlocationweatherdisplay_current_weather__2DGmN"}},65:function(e,t,a){e.exports={weather_card:"weathercard_weather_card__2fV4J",weather_day_name:"weathercard_weather_day_name__1BgQz",weather_max_temp:"weathercard_weather_max_temp__24cPi",weather_min_temp:"weathercard_weather_min_temp__uyOAx"}},66:function(e,t,a){e.exports={favorite_location_container:"favorites_favorite_location_container__1hvsP"}},67:function(e,t,a){e.exports={search_box:"favoritessearchbar_search_box__2IUe3",search_text:"favoritessearchbar_search_text__2ePDG",search_button:"favoritessearchbar_search_button__zdSJ3",extend_container:"favoritessearchbar_extend_container__2zCh5"}},68:function(e,t,a){e.exports={container:"favoriteweathercard_container__28f65",location_name:"favoriteweathercard_location_name__36Zy9",location_temp:"favoriteweathercard_location_temp__1Pk9_",location_weather:"favoriteweathercard_location_weather__Y6npv",remove_button:"favoriteweathercard_remove_button__1us43",seperator:"favoriteweathercard_seperator__nZdb3",remove_icon:"favoriteweathercard_remove_icon__3XFda"}},75:function(e,t,a){e.exports={error_container:"errors_error_container__37KV4",error_text:"errors_error_text__14vSY",error_dismiss_button:"errors_error_dismiss_button__2x3gE"}},76:function(e,t,a){"use strict";a.r(t);var r=a(1),o=a(0),n=a.n(o),c=a(37),i=a(24),s=a(39),l=a.n(s),d=(a(40),a(19)),u=a.n(d),m=a(17),v=a(20),h=a(42),_=a.n(h),f=a(13),p=a(16),P=a(3),E=a(21),b=a.n(E);var y=function(){var e=Object(o.useContext)(P.a),t=Object(o.useState)([]),a=Object(r.a)(t,2),c=a[0],i=a[1],s=Object(o.useState)(!1),l=Object(r.a)(s,2),d=l[0],h=l[1],E=Object(o.useRef)(null),y="",g=[],x=[],w=[],L=[];return e.locationProvider.setLocation(),Object(o.useEffect)((function(){e.locationProvider.location&&function(){var t=Object(v.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("http://dataservice.accuweather.com/locations/v1/cities/autocomplete",{params:{apikey:"oOxmk39rFEBZ2zfamtD1Z6rkxtSPcNZA",q:e.locationProvider.location,language:"en-us"}}).catch((function(t){console.error(t),e.errorsProvider.setErrors([].concat(Object(m.a)(e.errorsProvider.errors),["Error fetching related locations"]))}));case 2:(a=t.sent)&&0!==a.data.length&&(a.data.map((function(e,t){y=e.LocalizedName+", "+e.AdministrativeArea.LocalizedName+", "+e.Country.LocalizedName,x.push(e.Key),w.push(y),g.push(n.a.createElement("div",{key:t,className:_.a.individual_location},n.a.createElement("a",{onClick:function(e){N(t)}},y)))})),i(g));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e.locationProvider.location]),Object(o.useEffect)((function(){e.locationCodeProvider.locationCode&&(function(){var t=Object(v.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("http://dataservice.accuweather.com/forecasts/v1/daily/5day/"+e.locationCodeProvider.locationCode,{params:{apikey:"oOxmk39rFEBZ2zfamtD1Z6rkxtSPcNZA",language:"en-us",details:!1,metric:e.metricUnitProvider.metricUnits}}).catch((function(t){console.error(t),e.errorsProvider.setErrors([].concat(Object(m.a)(e.errorsProvider.errors),["Error fetching forecast"]))}));case 2:(a=t.sent)&&e.forecastProvider.setForecast(a.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),C()&&(-1!==S()?h(!0):h(!1)))}),[e.locationCodeProvider.locationCode,e.favoriteLocationsProvider.favoriteLocations,e.metricUnitProvider.metricUnits]),n.a.createElement("div",{className:_.a.search_box,style:e.themeStyle.themesStylesWhole},n.a.createElement("div",{className:_.a.input_seperator},n.a.createElement("input",{style:e.themeStyle.themesStylesText,ref:E,className:_.a.search_text,type:"text",placeholder:e.selectedLocationProvider.selectedLocation,onChange:function(t){e.lastLocationSearchProvider.setLastLocationSearch(t.target.value)}}),n.a.createElement("div",{className:_.a.search_related_locations},c)),n.a.createElement("div",{className:_.a.search_button,onClick:function(t){if(e.lastLocationSearchProvider.lastLocationSearch.toString().length>0){var a=e.lastLocationSearchProvider.lastLocationSearch;a=a.toLowerCase().split(" ");for(var r,o=0;o<a.length;o++)a[o]=a[o].charAt(0).toUpperCase()+a[o].substring(1);r=a.join(" "),e.locationProvider.setLocation(r)}}},n.a.createElement(f.a,{icon:p.c,style:e.themeStyle.themesStylesText})),C()?d?n.a.createElement("div",{className:_.a.add_to_favorites,style:{color:"#c0392b"},onClick:function(){if(C()){L=Object(m.a)(e.favoriteLocationsProvider.favoriteLocations);var t=S();-1!=t&&(console.log(L[t]),L.splice(t,1),e.favoriteLocationsProvider.setFavoriteLocations(Object(m.a)(L)),L=[])}}},n.a.createElement(f.a,{icon:p.a})):n.a.createElement("div",{className:_.a.add_to_favorites,style:{color:"#2980b9"},onClick:function(){C()&&e.favoriteLocationsProvider.setFavoriteLocations([].concat(Object(m.a)(e.favoriteLocationsProvider.favoriteLocations),[C()]))}},n.a.createElement(f.a,{icon:p.b})):n.a.createElement("div",null));function N(t){e.selectedLocationProvider.setSelectedLocation(w[t]),e.locationCodeProvider.setLocationCode(x[t]),E.current.value=w[t],i([])}function S(){var t=-1;return C()&&e.favoriteLocationsProvider.favoriteLocations.map((function(e,a){e.locationCode===C().locationCode&&e.locationName===C().locationName&&(t=a)})),t}function C(){if(e.locationCodeProvider.locationCode&&e.selectedLocationProvider.selectedLocation)return{locationCode:e.locationCodeProvider.locationCode,locationName:e.selectedLocationProvider.selectedLocation}}},g=a(64),x=a.n(g),w=a(65),L=a.n(w);var N=function(e){var t=Object(o.useContext)(P.a),a=e.details,r=new Date(a.Date),c=a.Temperature.Minimum,i=a.Temperature.Maximum,s=!1;return a.Day.IconPhrase===a.Night.IconPhrase&&(s=!0),n.a.createElement("div",{className:L.a.weather_card,style:t.themeStyle.themesStylesWhole},n.a.createElement("div",{className:L.a.weather_day_name},r.toLocaleDateString("us-en",{weekday:"long"}).substr(0,3)),n.a.createElement("div",{className:L.a.weather_max_temp},Math.round(i.Value),t.metricUnitProvider.metricUnits?"\xb0":"\u2109","/",n.a.createElement("span",{className:L.a.weather_min_temp},Math.round(c.Value),t.metricUnitProvider.metricUnits?"\xb0":"\u2109")),s?n.a.createElement("div",{className:L.a.weather_whole_day},a.Day.IconPhrase):n.a.createElement("div",null,n.a.createElement("div",{className:L.a.weather_day_info},"Day: ",a.Day.IconPhrase),n.a.createElement("div",{className:L.a.weather_day_night_divide}),n.a.createElement("div",{className:L.a.weather_night_info},"Night: ",a.Night.IconPhrase)))};var S=function(){var e=Object(o.useContext)(P.a),t=Object(o.useState)(""),a=Object(r.a)(t,2),c=a[0],i=a[1],s="";Object(o.useEffect)((function(){e.usedGeolocationProvider.usedGeolocation||function(){var t=Object(v.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(){var t=Object(v.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.coords.latitude+","+a.coords.longitude;case 2:s=t.sent,console.log(s),console.log("oOxmk39rFEBZ2zfamtD1Z6rkxtSPcNZA"),b.a.get("http://dataservice.accuweather.com/locations/v1/cities/geoposition/search",{params:{apikey:"oOxmk39rFEBZ2zfamtD1Z6rkxtSPcNZA",q:s,language:"en-us",details:!1,toplevel:!0}}).catch((function(t){console.error(t),e.errorsProvider.setErrors([].concat(Object(m.a)(e.errorsProvider.errors),["Error fetching geolocation data"]))})).then((function(t){t&&(e.locationCodeProvider.setLocationCode(t.data.Key),e.selectedLocationProvider.setSelectedLocation(t.data.LocalizedName+", "+t.data.AdministrativeArea.LocalizedName+", "+t.data.Country.LocalizedName))})),e.usedGeolocationProvider.setUsedGeolocation(!0);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e.usedGeolocationProvider.usedGeolocation]),Object(o.useEffect)((function(){if(e.selectedLocationProvider.selectedLocation){var t=function(){var t=Object(v.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("https://api.unsplash.com/search/photos",{params:{query:e.selectedLocationProvider.selectedLocation,orientation:"landscape"},headers:{Authorization:"Client-ID 3775db0966a31bf26940756dc4211ff20c6eefde88c3d207428631e04595a6c6"}}).catch((function(t){console.error(t),e.errorsProvider.setErrors([].concat(Object(m.a)(e.errorsProvider.errors),["Error fetching background image"]))}));case 2:(a=t.sent)&&0!==a.data.results.length&&i(a.data.results[Math.floor(Math.random()*a.data.results.length)].links.download);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){var t=Object(v.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.locationCodeProvider.locationCode){t.next=5;break}return t.next=3,b.a.get("http://dataservice.accuweather.com/currentconditions/v1/"+e.locationCodeProvider.locationCode,{params:{apikey:"oOxmk39rFEBZ2zfamtD1Z6rkxtSPcNZA",language:"en-us",metric:e.metricUnitProvider.metricUnits}}).catch((function(t){console.error(t),e.errorsProvider.setErrors([].concat(Object(m.a)(e.errorsProvider.errors),["Error current location data"]))}));case 3:(a=t.sent)&&e.currentWeatherProvider.setCurrentWeather(a.data[0]);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t(),a()}}),[e.selectedLocationProvider.selectedLocation]);var l=[];return e.forecastProvider.forecast&&e.forecastProvider.forecast.DailyForecasts.map((function(e,t){l.push(n.a.createElement(N,{details:e,key:t}))})),n.a.createElement("div",{className:x.a.location_image,style:{backgroundImage:"url(".concat(c,")")}},n.a.createElement("div",{className:x.a.location_title,style:e.themeStyle.themesStylesWhole},e.selectedLocationProvider.selectedLocation),n.a.createElement("div",{className:x.a.container},e.currentWeatherProvider.currentWeather?n.a.createElement("div",{className:x.a.current_weather,style:e.themeStyle.themesStylesWhole},n.a.createElement("div",{className:x.a.current_weather_weather_type},"Current Weather -"," ",e.currentWeatherProvider.currentWeather.WeatherText," ","/"," ",e.metricUnitProvider.metricUnits?e.currentWeatherProvider.currentWeather.Temperature.Metric.Value+"\xb0":e.currentWeatherProvider.currentWeather.Temperature.Imperial.Value+"\u2109")):n.a.createElement("div",null),l))};var C=function(){return n.a.createElement("div",null,n.a.createElement(y,null),n.a.createElement(S,null))},O=a(66),k=a.n(O),j=a(67),F=a.n(j);var U=function(){var e=Object(o.useContext)(P.a);return n.a.createElement("div",{className:F.a.search_box,style:e.themeStyle.themesStylesWhole},n.a.createElement("div",{className:F.a.extend_container},n.a.createElement("input",{ref:e.favoriteSearchBarEl,className:F.a.search_text,type:"text",style:e.themeStyle.themesStylesText,placeholder:"Search your favorites",onChange:function(t){e.searchedFavoritesProvider.setSearchedFavorites(t.target.value)}}),n.a.createElement("div",{className:F.a.search_button},n.a.createElement(f.a,{icon:p.c}))))},W=a(68),T=a.n(W);var D=function(e){var t=Object(o.useContext)(P.a),a=Object(o.useState)(!1),c=Object(r.a)(a,2),s=c[0],l=c[1],d=Object(o.useState)({WeatherText:"Default",Temperature:{Metric:{Value:0},Imperial:{Value:0}}}),h=Object(r.a)(d,2),_=h[0],E=h[1],y=[];return Object(o.useEffect)((function(){function a(){return(a=Object(v.a)(u.a.mark((function a(){var r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.get("http://dataservice.accuweather.com/currentconditions/v1/"+e.locationCode,{params:{apikey:"oOxmk39rFEBZ2zfamtD1Z6rkxtSPcNZA",language:"en-us",details:!1}}).catch((function(e){console.error(e),t.errorsProvider.setErrors([].concat(Object(m.a)(t.errorsProvider.errors),["Error fetching current weather"]))}));case 2:(r=a.sent)&&E(r.data[0]);case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[]),n.a.createElement(n.a.Fragment,null,s?(console.log("Came from - "),console.log(e),t.locationCodeProvider.setLocationCode(e.locationCode),t.selectedLocationProvider.setSelectedLocation(e.locationName),t.searchedFavoritesProvider.setSearchedFavorites(""),t.favoriteSearchBarEl.current.value="",n.a.createElement(i.a,{to:"/",push:!0})):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:T.a.container,style:t.themeStyle.themesStylesWhole},n.a.createElement("div",{className:T.a.seperator,onClick:function(){l(!0)}},n.a.createElement("div",{className:T.a.location_name},e.locationName),n.a.createElement("div",{className:T.a.location_temp},t.metricUnitProvider.metricUnits?_.Temperature.Metric.Value+"\xb0":_.Temperature.Imperial.Value+"\u2109"),n.a.createElement("div",{className:T.a.location_weather},_.WeatherText)),n.a.createElement("div",{className:T.a.remove_button},n.a.createElement(f.a,{icon:p.d,className:T.a.remove_icon,onClick:function(){(y=t.favoriteLocationsProvider.favoriteLocations).splice(e.index,1),t.favoriteLocationsProvider.setFavoriteLocations(Object(m.a)(y)),t.searchedFavoritesProvider.setSearchedFavorites(""),t.favoriteSearchBarEl.current.value=""}})))))};var Z=function(){var e=Object(o.useContext)(P.a),t=Object(o.useState)([]),a=Object(r.a)(t,2),c=a[0],i=a[1],s=Object(o.useState)([]),l=Object(r.a)(s,2),d=l[0],u=l[1],m=[],v=[];return Object(o.useEffect)((function(){e.locationProvider.setLocation(""),e.searchedFavoritesProvider.setSearchedFavorites(""),e.favoriteSearchBarEl.current.value=""}),[]),Object(o.useEffect)((function(){e.favoriteLocationsProvider.favoriteLocations.length>=0&&(e.favoriteLocationsProvider.favoriteLocations.map((function(e,t){m.push(n.a.createElement(D,{key:t,index:t,locationCode:e.locationCode,locationName:e.locationName}))})),i([].concat(m)))}),[e.favoriteLocationsProvider.favoriteLocations]),Object(o.useEffect)((function(){c.map((function(t,a){t.props.locationName.toString().toLowerCase().includes(e.searchedFavoritesProvider.searchedFavorites.toString().toLowerCase())&&v.push(t),u([].concat(v))}))}),[e.searchedFavoritesProvider.searchedFavorites]),n.a.createElement("div",null,n.a.createElement(U,null),n.a.createElement("div",{className:k.a.favorite_location_container},e.searchedFavoritesProvider.searchedFavorites?d:c))},z=a(75),A=a.n(z);var B=function(e){var t=Object(o.useContext)(P.a),a=[];return n.a.createElement("div",{className:A.a.error_container,style:t.themeStyle.themesStylesWhole},n.a.createElement("div",{className:A.a.error_text},e.errorText),n.a.createElement("div",{className:A.a.error_dismiss_button,onClick:function(){(a=t.errorsProvider.errors).splice(e.key,1),t.errorsProvider.setErrors(Object(m.a)(a))}},n.a.createElement(f.a,{icon:p.d})))};t.default=function(){var e=Object(o.useContext)(P.a),t=Object(o.useState)(),a=Object(r.a)(t,2),s=a[0],d=a[1],u=[];return Object(o.useEffect)((function(){e.errorsProvider.errors&&(e.errorsProvider.errors.map((function(e,t){u.push(n.a.createElement(B,{key:t,errorText:e}))})),d([].concat(u)))}),[e.errorsProvider]),n.a.createElement(c.a,null,n.a.createElement("header",{className:l.a.header,style:e.themeStyle.themesStylesWhole},"Weather App By Ido",n.a.createElement("div",{className:l.a.error_starter},s),n.a.createElement("div",{className:l.a.unit_changer,onClick:function(){e.metricUnitProvider.metricUnits?e.metricUnitProvider.setMetricUnits(!1):e.metricUnitProvider.setMetricUnits(!0)}},e.metricUnitProvider.metricUnits?"Units: C":"Units: F"),n.a.createElement("div",{className:l.a.theme_changer,onClick:function(){e.themeProvider.lightTheme?e.themeProvider.setLightTheme(!1):e.themeProvider.setLightTheme(!0)}},"Theme: ",e.themeProvider.lightTheme?"Light":"Dark"),n.a.createElement("nav",null,n.a.createElement("ul",{className:l.a.nav_links},n.a.createElement("li",{className:l.a.nav_link},n.a.createElement(c.b,{className:l.a.link,to:"/",style:e.themeStyle.themesStylesWhole},"Home")),n.a.createElement("li",{className:l.a.nav_link},n.a.createElement(c.b,{className:l.a.link,to:"/favorites",style:e.themeStyle.themesStylesWhole},"Favorites"))))),n.a.createElement(i.d,null,n.a.createElement(i.b,{path:"/favorites"},n.a.createElement(Z,null)),n.a.createElement(i.b,{path:"/"},n.a.createElement(C,null))))}}}]);
//# sourceMappingURL=3.a34b33c5.chunk.js.map